<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:jaxws="http://cxf.apache.org/jaxws"
  xmlns:cxf="http://cxf.apache.org/core"
  xmlns:ns="http://proxy.fsws.uis.no"
  xsi:schemaLocation="
    http://cxf.apache.org/core  http://cxf.apache.org/schemas/core.xsd
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
	http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

  <import resource="classpath:META-INF/cxf/cxf.xml" />

  <jaxws:endpoint
    id="studinfoProxyService"
    implementor="#studinfoProxy"
    address="/studinfo"
    serviceName="ns:StudinfoService" 
    endpointName="ns:StudinfoPort"
  >
    <jaxws:inInterceptors>
      <ref bean="authorizationInterceptor"/>
    </jaxws:inInterceptors>
    <jaxws:properties>
      <entry key="mtom-enabled" value="true" />
    </jaxws:properties>
  </jaxws:endpoint>

  <jaxws:endpoint 
    id="cdmProxyService" 
    implementor="#cdmProxy"
    address="/cdm" 
    serviceName="ns:CdmService" 
    endpointName="ns:CdmPort"
  >
    <jaxws:inInterceptors>
      <ref bean="authorizationInterceptor"/>
    </jaxws:inInterceptors>
    <jaxws:properties>
      <entry key="mtom-enabled" value="true" />
    </jaxws:properties>
  </jaxws:endpoint>

  <bean id="studinfoProxy" class="no.uis.fsws.proxy.impl.StudinfoProxyImpl">
  </bean>

  <bean id="cdmProxy" class="no.uis.fsws.proxy.impl.CdmProxyImpl">
  </bean>
  
  <bean id="authorizationInterceptor" class="no.uis.fsws.proxy.impl.ProxySoapHeaderInterceptor">
    <property name="realm" value="UiS-WS"/>
    <property name="authorizer">
      <bean class="no.uis.fsws.proxy.impl.AuthorizeAllAuthorizer"/>
    </property>
  </bean>
</beans>
